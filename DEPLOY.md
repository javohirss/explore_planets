# Деплой на Render

## Шаги для деплоя:

### 1. Подготовка репозитория
- Убедитесь, что все файлы закоммичены в Git
- Загрузите код в GitHub/GitLab репозиторий

### 2. Создание сервиса на Render

1. Зайдите на [render.com](https://render.com)
2. Нажмите "New +" → "Web Service"
3. Подключите ваш Git репозиторий
4. Настройте следующие параметры:

**Build & Deploy:**
- **Build Command:** `pip install -r requirements.txt && alembic upgrade head`
- **Start Command:** `uvicorn app.main:app --host 0.0.0.0 --port $PORT`

**Environment:**
- **Python Version:** 3.11.0

### 3. Настройка базы данных

1. В панели Render создайте новую PostgreSQL базу данных:
   - **Name:** explore-planets-db
   - **Plan:** Free

2. После создания базы, скопируйте **External Database URL**

### 4. Переменные окружения

В настройках веб-сервиса добавьте переменные окружения:

```
DATABASE_URL=<скопированный URL из базы данных>
PYTHON_VERSION=3.11.0
```

### 5. Деплой

1. Нажмите "Deploy"
2. Дождитесь завершения сборки
3. Проверьте логи на наличие ошибок

### 6. Проверка работы

После успешного деплоя:
- API будет доступен по URL вида: `https://your-app-name.onrender.com`
- Swagger документация: `https://your-app-name.onrender.com/docs`

## Возможные проблемы:

### Ошибка подключения к БД
- Проверьте, что DATABASE_URL правильно установлен
- Убедитесь, что база данных создана и запущена

### Ошибки миграций
- Проверьте логи сборки
- Убедитесь, что alembic настроен правильно

### Проблемы с моделями ML
- Убедитесь, что файлы моделей загружены в репозиторий
- Проверьте пути к моделям в конфигурации
